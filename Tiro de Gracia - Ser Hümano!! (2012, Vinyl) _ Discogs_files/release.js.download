webpackJsonp([74],{0:function(e,t,n){e.exports=n(1039)},937:function(e,t,n){"use strict";var i=n(333),r=n(334),o=n(339),a=n(378),s=n(338),l=s.getText,c=n(374),d=n(371);n(650);var u=ds.require("layout");n(773);var p=ds.require("youtubeIframeAPI");n(369);var m=ds.require("Backbone"),f={},v=121,h=o["videos/macro:playlist"]||[],g=h.slice(0,+v+1||void 0),w=3,b=3,y=!1,_=1e4,k=l("Some mobile devices will not allow playback until you first activate the YouTube player by tapping on it. If the video is not loading, refresh the page, then tap on the player."),T=void 0,S=function(){return i("html").hasClass("needs_reduced_ui")&&"mobile"===u.mode()},C=function(e){e=Number(e);var t=Math.floor(e/60),n=String(((e-60*t)/100).toFixed(2)).slice(2,4)||"00";return t+":"+n};f.formatDuration=C;var A=function(){var e=i("#youtube_player_placeholder");this.$player=e;var t=new Promise(function(t){if(1===e.length&&g.length>0)return e.parents(".video.toggle_section").hasClass("toggle_section_collapsed")?i(window).on("toggle_section_video:expanded.video_section",function(){i(window).off("toggle_section_video:expanded.video_section"),t(f)}):t(f)});return t.then(x)};f.init=A,d(function(){return f.init()});var x=function(){f.current=g[0];var e=void 0,t=new Promise(function(t){return e=t}),n=m.Model.extend({initialize:function(){return this.set("duration",C(this.get("duration"))),f.$player.on(this.id+":changed",r.bind(this.control,this))},defaults:{playing:!1},play:function(){var e=this.get("id"),n=r.indexOf(r.pluck(g,"id"),e);return e!==f.current.id?(t.then(function(e){return e.playVideoAt(n)}),f.current=e):t.then(function(e){return e.playVideo()}),this.set("playing",!0),this},pause:function(){return t.then(function(e){return e.pauseVideo()}),this.set("playing",!1),this},togglePlay:function(){return this.get("playing")?this.pause():this.play()},control:function(e,t){return this.set("playing",t===YT.PlayerState.PLAYING),this}}),s=m.Collection.extend({model:n}),l=f.tracks=new s,d=function(e){return function(){var t=e*f.$tracklist.height(),n=this.$el.position().top-f.$tracklist.position().top;return t>=n&&n>=0}},u=m.View.extend({initialize:function(){var e=this.model.get("id");this.hasContent=!1,this.render(),this.$el.data("id",e),this.model.on("change",this.render,this),this.model.on("nodata",this.destroy,this),this.$el.onFastClick(r.bind(this.togglePlay,this))},tagName:"div",className:"youtube_track",template:r.template("<img src='<%= thumbnail %>' /> <i class='icon icon-play'></i> <i class='icon icon-pause'></i> <strong><%= title %></strong> <br /> <span class='youtube_track_duration'><%= duration %></span>"),destroy:function(){this.remove(),f.trackViews.splice(r(f.trackViews).indexOf(this),1)},renderContent:function(){var e=this.$el;return e.html(this.template(this.model.toJSON())),this.hasContent=!0,this.model.trigger("content:rendered"),this},render:function(){var e=this.model.get("playing");this.$el.toggleClass("youtube_track_paused",!e).toggleClass("youtube_track_playing",e);var t=1===this.$el.closest("body").length;if(t){var n=f.$tracklist.scrollTop()+(this.$el.position().top-f.$tracklist.position().top)-f.$tracklist.height()/2+this.$el.height()/2;e&&f.$tracklist.stop().animate({scrollTop:n},200)}return this.hasContent||this.$el.append("<div class='youtube_track_placeholder' />"),!this.hasContent&&t&&this.visible()&&this.renderContent(),this},visible:d(1),nearViewport:d(3),togglePlay:function(){this.model.togglePlay();var e=this.model.get("playing");!e||y||T||(T=r.delay(function(){if(!y)return a.confirm(k()).then(function(){return S()&&(location.hash="video"),location.reload()})},_))}}),v=function(e){y||(y=e.data===YT.PlayerState.PLAYING);var t="function"==typeof f.player.getVideoData?f.player.getVideoData().video_id:void 0;if(t){var n=l.find(function(e){return e.get("id")!==t&&e.get("playing")});n&&n.set("playing",!1),f.$player.trigger(t+":changed",[e.data]),h(e)}},h=function(e){var t=o.pageObject.objectType,n=p.getPlayerState(e),i="video"+n;"playing"===n&&c.legacyTrack(t,i)},A=function(){var n=void 0;return this.player||(n=new YT.Player("youtube_player_placeholder",{host:"http://www.youtube-nocookie.com",height:"100%",width:"100%",playerVars:{playlist:r.pluck(g,"id").join(","),loop:!0},events:{onReady:function(t){e(t.target)},onStateChange:v}}),t.then(function(e){return e.cuePlaylist(r.pluck(g,"id"))}),this.player=n),this.player},x=function(){var e=void 0;return f.$tracklist||(f.$tracklist=e=i("<div id='youtube_tracklist' />"),f.trackViews=l.map(function(t){var n=new u({model:t});return e.append(n.$el),n}),i("#youtube_player_wrapper").after(e),O("nearViewport"),e.on("scroll.lazyloading_video_tracks",r.throttle(r.partial(O,"nearViewport"),75,{leading:!1})),l.on("change:playing",function(e,t){if(t&&S())return a.scrollTo("video")}),l.on("content:rendered",function(){if(r.every(f.trackViews,function(e){return e.hasContent}))return e.off("scroll.lazyloading_video_tracks")})),f.$tracklist},O=function(e){return r(L(e)).invoke("renderContent")},L=function(e){for(var t=w*b,n=[],i=f.trackViews.length,r=0;r<i&&n.length<t;)f.trackViews[r][e]()&&n.push(f.trackViews[r]),r+=1;return n};l.reset(g),p.load().then(r(A).bind(f)).then(r(x).bind(f))};e.exports=f},938:function(e,t,n){"use strict";var i=n(333),r=n(334),o=n(339),a=n(338),s=n(378),l=n(338),c=l.getText,d=n(644),u=n(374),p=ds.require("alerts"),m=ds.require("rating"),f=ds.require("ready"),v=ds.require("tooltip");n(677),n(752),n(371),n(769);var h=s.getUrl,g={},w=10,b=!1,y=".review";g.init=function(){var e=i("body");return this.previewTimeout=0,o.loggedIn?o.userIsDbBanned||g.restore():i("#add_new_review").on("click",r.partial(r.defer,s.requireLogin)),e.on("click",".review_action1-reply",g.contextualCompose("reply")),e.on("click",".review_action1-edit",g.contextualCompose("edit")),e.on("click",".review_action2-notify",function(){var e=this.id.replace("rvnotify_","");return g.notify(e)}),e.on("click",".remove_review",g.removeReview),e.on("click",".review .review_tag",g.tag),d.setupActionMenuView(i(y))},g.removeReview=function(e){var t=i(this),n=t.closest(".review"),o=i(".review").filter(function(){return i(this).data("replyTo")===n.data("cid")}),l=h(n.data("deleteUrl")),c=function(){i.ajax({type:"delete",url:l}),n.fadeOut().promise().then(function(){d.teardown(n),n.remove()}),o.fadeOut().promise().then(function(){return o.each(d.teardown)})};s.confirm(a.getText("Are you certain you would like to delete this review?")()).then(c),r.defer(function(){return i(".ui-dialog-buttonset").find("button:last").focus()}),e.preventDefault()},g.compose=function(e,t,n){var r=new Promise(function(r,o){var a=function(e){g.canCompose()&&(g.insertHTML(e,t),g.initCompose(n))};if(g.canCompose()||g.hideOthers(),s.requireLogin()){g.composing={resolve:r,reject:o},g.mode=n;var l=i.get(e,{styleVersion:!0});return l.then(a,g.alertResponseText),l.fail(o)}return o()}),o=function(){return i("#review_compose").remove()};return r.then(o,o),r},g.initCompose=function(e){e=e||"add";var t="add"===e&&r.includeString(location.hash,"add-new-review"),n=i("#review");g.$reviewWordCount=i("#review-word-count");var o=i("#review_compose");return o.find(".quote_review").on("click",g.quote),i("#reviews_compose_submit").on("click",function(){var t=i(this);n.prop("disabled",!0),t.prop("disabled",!0);var r={edit:c("Saving")(),add:c("Posting")(),reply:c("Replying")()};t.text(r[e]),t.blur()}),i(".reviews-compose-submit-edit").on("click",function(){var e=i(this).data("review-cid");return g.submitEdit(e),!1}),i(".reviews-compose-submit-reply").on("click",function(){var e=i(this).data("review-parent-cid");return g.submitReply(e),!1}),i(".reviews-compose-submit-add").on("click",function(){var e=i(this).data("review-what"),t=i(this).data("review-obid");return g.submitAdd(e,t),!1}),i(".reviews-cancel-event").on("click",g.cancelClickHandler),g.validate.call(n),n.on("change keyup",g.preview).on("change keyup",g.validate).on("keyup",g.cancelOnEscape),("add"!==e||t)&&n.focus(),t&&(r.delay(s.scrollTo,n,10),location.hash=""),this},g.validate=function(){var e=i.trim(this.value),t=e.length,n=e.split(" ").length,r=n>=w;t&&!r?g.$reviewWordCount.addClass("show").html("<i class='icon icon-exclamation-circle'></i> "+c("At least %(minReviewWordCount)s words must be entered. Please enter at least %(wordsNeeded)s more.")({minReviewWordCount:w,wordsNeeded:w-n})):g.$reviewWordCount.removeClass("show"),i("#review_compose #reviews_compose_submit").prop("disabled",!r)},g.cancelOnEscape=function(e){var t=27;e.keyCode===t&&"add"!==g.mode&&g.cancel()},g.canCompose=function(){return i("#review_compose").length<1},g.hideOthers=function(){g.close()},g.add=function(e){return g.compose(e,i("#review_space"),"add")},g.addReviewFromElement=function(e){var t=i(e),n=t.data("reviews-add-url");if(n)return g.add(n)},g.contextualCompose=function(e){return function(){var t=i(this),n=t.closest(".review");b=n.hasClass("is_showing_object"),v.setup(n);var r=h("/reviews/"+e+"?id="+n.data("cid"));n.addClass(e+"ing");var o=g.compose(r,n,e),a=function(){return n.removeClass(e+"ing")};return o.then(a,a),"edit"===e&&o.then(function(){return n.remove()}),o}},g.preview=function(e){g.previewTimeout&&clearTimeout(g.previewTimeout);var t=s.toString((new Date).getTime()).replace(/\D/gi,"");i(e.target).parent().find("div.review_preview").attr("id",t),g.previewTimeout=r.delay(g.doPreview,750,t)},g.doPreview=function(e){e=i(e.target?e.target:e);var t=i("#review").val();return i(".review_preview_wrap").toggle(i.trim(t).length>0),i.post(h("/reviews/preview"),{comment:t,styleVersion:!0},function(e){i(".review_preview").html(e)})},g.submit=function(e,t){return new Promise(function(n,r){var o=g.mode,a=function(e){var t;g.insertHTML(e,i("#review_compose"));var n=i("#parent").val();n&&g.notify(n,1),g.reset(),g.composing.resolve(t),m.init(),d.setupActionMenuView(i(y))};if(s.requireLogin()){var l=i("#review").val();"add"!==o&&"edit"!==o||(t.is_review=Number(i("#is_review").is(":checked"))),t.notify=Number(i("#notify").is(":checked")),t.comment=l,t.styleVersion=!0,t.show_object=b;var c=i.post(h("/reviews/"+e),t);return c.then(a,g.alertResponseText),c.then(g.restore),c.then(n,r),c.then(function(){return u.legacyTrack("review",o,t.what)})}return r()})},g.alertResponseText=function(e){return p.alert(e.responseText)},g.submitAdd=function(e,t){return g.submit("post",{what:e,obid:t})},g.submitReply=function(e){return g.submit("post",{id:e})},g.submitEdit=function(e){return g.submit("save",{id:e})},g.cancel=function(){return g.close(),g.restore()},g.restore=function(){return g.addReviewFromElement(i("#review_space"))},g.cancelClickHandler=function(e){g.cancel(),e.preventDefault()},g.close=function(){g.composing&&(g.composing.reject(),i("#review_compose").remove())},g.reset=function(){i("#review").val(""),i(".review_preview_wrap").hide()},g.insertHTML=function(e,t){var n=i(t),r=i(i.trim(e));return n.after(r),v.setup(r),n},g.tag=function(){var e=i(this),t=e.parents(".review_content"),n=0,r=1;if(s.requireLogin()){if(t.length>0&&t.attr("id")&&(n=t.attr("id").replace("c","")),!n||!r)return;i.post(h("/reviews/tag"),{cid:n,tid:r,styleVersion:!0},function(){return i("#tags_rv"+n).css("font-weight","bold"),window.location.reload()})}return!1},g.quote=function(e){var t=i("#review_compose").prev(".review"),n=t.find("a.user").first().html(),o=i.trim(t.find("div.review_comment").first().html()),a="[quote="+n+"] "+o+" [/quote]\n";a+=i("#review").val(),a=r.stripTags(a),i("#review").val(a).focus(),g.preview(e)},g.notify=function(e,t){if(s.requireLogin()){var n=i("#rvnotify_"+e);return i.post(h("/reviews/notify"),{id:e,peek:t,styleVersion:!0},function(e){n.html(r.capitalize(e))})}},f(function(){return g.init()}),e.exports=g},1001:function(e,t,n){var i,r,o,a,s;i=n(333),r=n(334),o=n(339),a=n(370),s=n(378),n(371),ds.define("recommendations",function(e){var t,n,l,c,d;return c=e("ready"),t=s.getUrl,n=new Promise(function(e){var t,n;if(t=i("#recs_slider").get(0))return n=function(){return s.isElementInViewport(t)},n()?e(t):i(window).on("scroll.lazy-recommendations",r.throttle(function(){n()&&(e(t),i(window).off("scroll.lazy-recommendations"))},200))}),d=function(){var e,t,n,r,o;if(t="<!--lazy",o="lazy-->",e=i("#recs_slider"),n=e.html(),r=n.indexOf(t)>=0&&n.indexOf(o)>=0)return e.html(e.html().replace(t,"").replace(o,""))},l=function(){var e,n,r,s;if(n=i(".recommendations"),n.length)return r=n.find("#recs_slider"),e=n.find(".cards"),s=e.find(".card_large").outerWidth(!0),e.css("width",e.data("num-recs")*s),r.lazyGallery({has3d:a.has3d(),isMobile:a.isMobile,snapToSlide:!1,slideContainerClass:".cards",slideClass:".card_large",slideCount:e.data("num-recs"),advance:5,resize:!1,get:function(n){var a,s,l,c,d,u,p,m;c=o["recommendations/_macro:pagetype"],u=o["recommendations/_macro:sellerid"],p=o["recommendations/_macro:sellerUsername"],m=o["recommendations/_macro:sourceIds"],s=r.data("ev"),l=n||1,a={type:c,page:l,ev:s},u&&(a.seller=u),m&&(a.ids=JSON.stringify(m)),d="seller"===c?"/seller/"+p+"/recs":"/release/recs/"+o["recommendations/_macro:pageid"],i.get(t(d),a,function(t){return e.append(t)})}})},c(function(){return n.then(function(){return d(),l()})})})},1039:function(e,t,n){var i,r,o,a,s,l,c,d,u,p,m,f,v,h,g,w,b,y,_,k,T,S,C;i=n(333),r=n(334),s=n(339),C=n(378),d=n(370).hasHistoryAPI,f=n(373),l=n(374),o=n(776),m=n(644),y=n(384),u=y.loadReactChunk,p=y.loadReactComponents,a=n(1040).default,n(1041),n(371),n(740),n(381),n(690),n(1001),ds.require("recommendations"),n(938),n(937),m=ds.require("menu"),f=ds.require("models"),b=ds.require("ready"),T=ds.require("skittles"),S=ds.require("storage"),v=ds.require("onNextVisit"),ds.require("vimShortcuts"),ds.require("reviews"),w={},w.master={},w.init=function(){var e,t,n,l,d,u,p;if(this.releaseID=s["release/view:releaseId"],this.override=!1,this.pageObj=s.pageObject,this.model=f.cards.get(this.pageObj.id),u=this.pageObj,l=u.format,p=u.title,this.model&&(this.$partials=i(".card_model_partial"),this.render=r.partial(o.renderCardModelState,this.$partials),this.model.on("change:wantlist change:collection",this.render),f.wantlist.on("add remove",this.renderBlocks),f.collection.on("add remove",this.renderBlocks),f.wantlist.on("add remove",this.renderStats),f.collection.on("add remove",this.renderStats),e=i(".release_collections_menu"),e.find(".toggle_wantlist").onFastClick(w.toggleWantlist),e.find(".add_to_collection").onFastClick(w.addToCollection),e.find(".remove_from_collection").onFastClick(w.removeFromCollection),e.find(".want_add_all_button").onFastClick(w.toggleAllWantList)),d=C.deparam(),d.add_to_wantlist&&w.addToWantlist(),m.setupActionMenuView(i(".body")),i(".master-filter-button").on("click",r.throttle(c,500)),window.location.search.match("filter")&&h(),n=S.get("add-to-later"),n&&g(n),s.loggedIn?_(l,p):k(l,p),t=document.querySelectorAll(".section.master-release-credits ul"),t[0]&&t[0].children.length>6)return a(t)},w.renderStats=function(e,t){var n,r,o,a;o=e instanceof f.WantlistModel,r=t.include(e),n=i(o?".want_num":".coll_num"),a=r&&1===t.length?1:t.length?0:-1,n.html(Number(n.html())+a)},w.renderBlocks=function(e,t){var n,o,a,s,l,c;l=e instanceof f.WantlistModel,a=l?"wantlist":"collection",s=t.include(e),c=e.get(l?"id":"release_id"),c===w.releaseID&&(s?(n=i(i.trim(r.template(i("#newBlockTemplate").html())({isWantlist:l,blockType:a,releaseID:c}))),o=i(".cw_block_wantlist"),o.length?o.before(n):i(".collections .section_content").append(n),ds.require("notes").init(),e.on("sync",function(){return n.attr("data-id",e.get("id")),n.find(".notes_field").data("coll-id",e.get("id")),n.find(".remove_from_collection").onFastClick(w.removeFromCollection),n.find(".toggle_wantlist").onFastClick(w.toggleWantlist)})):i(".cw_block_"+(l?"wantlist":"collection[data-id='"+e.get("id")+"']")).remove())},w.hideAddToListMenu=function(){w.$utilShow.off("click.addToListMenu"),w.$utilShow.on("click.addToListMenu",w.showAddToListMenu),i(window).off("click.addToListMenu"),w.$utilShow.removeClass("active"),w.$addToListMenu.removeClass("active")},w.collectionUpdate=function(e,t){i(".r_tr."+e).toggleClass("collection",t).each(function(){var e;return e=i(this),T.updateStatus(e,{collection:t}),T.updateMasterRowSkittles(e)})},w.wantlistUpdate=function(e,t){i("tr.r_tr."+e).toggleClass("wantlist",t).each(function(){var e;return e=i(this),T.updateStatus(e,{wantlist:t}),T.updateMasterRowSkittles(e)})},w.toggleWantlist=function(){var e,t;return e=1===w.model.get("wantlist").length,t=e?"removeFrom":"addTo",w.model[t]("wantlist"),!1},w.addToWantlist=function(){return w.model.addTo("wantlist"),!1},w.addToCollection=function(){return w.model.addTo("collection"),!1},w.removeFromCollection=function(){return w.model.removeFrom("collection",i(this).closest(".cw_block_collection").data("id")),!1},w.toggleAllWantList=function(e){w.model.toggleAllWantlist(),e.preventDefault()},c=function(e){return e.preventDefault(),h()},h=function(){u().then(p).then(function(){var e,t;return e=n(1042),d&&(t=C.updateParams(window.location.href,{add:{filter:!0}}),window.history.replaceState(null,null,t)),e.init(),l.legacyTrack("master release","Opened master release filtering modal")})},k=function(e,t){return i(".add_to_collection").on("click",function(){return v("google.legacyTrack","Optimistic Action","Clicked Add to Collection button"),v("googleTagManager.addJSONToDataLayer",JSON.stringify({event:"database-page-interaction",databaseInteraction:"Add To Collection",databaseSubmissionTitle:t,databaseSubmissionFormat:e}))}),i(".toggle_wantlist").on("click",function(){return v("google.legacyTrack","Optimistic Action","Clicked Add to Wantlist button"),v("googleTagManager.addJSONToDataLayer",JSON.stringify({event:"database-page-interaction",databaseInteraction:"Add To Wantlist",databaseSubmissionTitle:t,databaseSubmissionFormat:e}))}),i(".inv_add_button").on("click",function(){return v("google.legacyTrack","Optimistic Action","Clicked Sell Item button"),v("googleTagManager.addJSONToDataLayer",JSON.stringify({event:"database-page-interaction",databaseInteraction:"Sell Item",databaseSubmissionTitle:t,databaseSubmissionFormat:e}))}),i(".buy_release_button").on("click",function(){return v("googleTagManager.addJSONToDataLayer",JSON.stringify({event:"database-page-interaction",databaseInteraction:"Buy Item",databaseSubmissionTitle:t,databaseSubmissionFormat:e}))})},_=function(e,t){return window.dataLayer=window.dataLayer||[],i(".add_to_collection").on("click",function(){return window.dataLayer.push({event:"database-page-interaction",databaseInteraction:"Add To Collection",databaseSubmissionTitle:t,databaseSubmissionFormat:e})}),i(".toggle_wantlist").on("click",function(){return window.dataLayer.push({event:"database-page-interaction",databaseInteraction:"Add To WantList",databaseSubmissionTitle:t,databaseSubmissionFormat:e})}),i(".inv_add_button").on("click",function(){return v("googleTagManager.addJSONToDataLayer",JSON.stringify({event:"database-page-interaction",databaseInteraction:"Sell Item",databaseSubmissionTitle:t,databaseSubmissionFormat:e}))}),i(".buy_release_button").on("click",function(){return v("googleTagManager.addJSONToDataLayer",JSON.stringify({event:"database-page-interaction",databaseInteraction:"Buy Item",databaseSubmissionTitle:t,databaseSubmissionFormat:e}))})},b(function(){return w.init()}),g=function(e){var t,n,i;return t=e.id,i=e.property,n=f.cards.get(t),n&&n.addTo(i),S.remove("add-to-later")},e.exports=w},1040:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){var e=document.createElement("button");return e.classList.add("discloser__button"),e.innerHTML=u.show,e}function o(e){var t=e.hasAttribute("aria-expanded")&&"true"!==e.getAttribute("aria-expanded");e.setAttribute("aria-expanded",t)}function a(e){var t=e.target,n=t.getAttribute("aria-controls")||"",i=document.getElementById(n);if(i){var r="true"===i.getAttribute("aria-expanded");t.innerHTML=r?u.show:u.hide,o(i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,l.default)().then(function(){var t=r();e.forEach(function(e,n){var i="_discloser-"+(n+1);e.setAttribute("id",i),e.classList.add("discloser__container"),t.setAttribute("aria-controls",i),e.parentNode.insertBefore(t,e.nextSibling),o(e)}),document.addEventListener("click",a)}),function(){document.removeEventListener("click",a)}};var s=n(371),l=i(s),c=n(338),d=i(c),u={show:d.default.getText("%(indicator)s Show more…")({indicator:"<i class='icon icon-angle-down'></i>"}),hide:d.default.getText("%(indicator)s Hide")({indicator:"<i class='icon icon-angle-up'></i>"})}},1041:function(e,t,n){"use strict";var i=n(333),r=n(334),o=n(339),a=n(378),s=n(373),l=s.wantlist,c=s.collection,d=n(338),u=d.getText,p=n(371),m=n(678);n(677);var f=ds.require("alerts"),v=a.getUrl,h={SHARE:"broadcast_actions_share",SHARING:"broadcast_actions_sharing",UNSHARING:"broadcast_actions_unsharing",SHARED:"broadcast_actions_shared"},g={};g.init=function(){return l.on("sync",this.render,this),c.on("sync",this.render,this),g};var w=function(e){return f.alert(a.errorMessageFromXHR(e)),e},b=function(e,t){return function(n){return r.each(h,function(t){e.removeClass(t)}),e.addClass(t),n}};g.render=function(e,t){if(t.broadcast){var n=g.template(t.broadcast);m({message:n,type:"info",id:"cwBlockAdded",closable:!0}).$element.on("submit.broadcast",".broadcast_widget form",this.clickShare).on("click.broadcast",".broadcast_widget_undo",this.clickUndo)}},g.clickShare=function(e){var t=i(this).find(".broadcast_actions");b(t,h.SHARING)(),i.ajax({url:v("/broadcast/new"),type:"POST",data:i(this).serialize(),success:b(t,h.SHARED),error:b(t,h.SHARE)}).fail(w),e.preventDefault()},g.clickUndo=function(e){var t=i(this).parents("form"),n=t.find(".broadcast_actions");b(n,h.UNSHARING)(),i.ajax({url:v("/broadcast/delete"),type:"POST",data:t.serialize(),success:b(n,h.SHARE),error:b(n,h.SHARE)}).fail(w),e.preventDefault()},g.template=function(e){return e.templates={addedToYourCollection:u("Added %(title)s to your collection.")(e.preview),addedToYourWantlist:u("Added %(title)s to your wantlist.")(e.preview),share:u("Share")(),sharing:u("Sharing...")(),sharedOnYourProfile:u("Shared on your profile")(),undo:u("Undo")(),unsharing:u("Unsharing...")(),sharingSettings:u("Sharing Settings")()},e=r.extend(e,{userProfileUrl:v("/user/"+o.username),settingsPrivacyUrl:v("/settings/privacy")}),r.template('<div class="broadcast_widget" style="display: inline">         <form method="post" style="display: inline">         <input type="hidden" name="type" value="<%- type %>" />         <input type="hidden" name="object_id" value="<%- object_id %>" />         <input type="hidden" name="timestamp" value="<%- timestamp %>" />         <input type="hidden" name="signature" value="<%- signature %>" />         <% if (type === "add_collection") { %>         <strong><%= templates.addedToYourCollection %></strong>         <% } else if (type === "add_wantlist") { %>         <strong><%= templates.addedToYourWantlist %></strong>         <% } %>         <span class="broadcast_actions broadcast_actions_share">         <button class="broadcast_actions_share button button-green button-small"><i class="icon icon-bullhorn"></i> <%= templates.share %></button>         <span class="broadcast_actions_sharing"><button class="button button-small button-green" disabled="disabled"><i class="icon icon-spinner icon-spin"></i> <%= templates.sharing %></button></span>         <span class="broadcast_actions_shared"><a class="button button-green button-small" href="<%- userProfileUrl %>"><%= templates.sharedOnYourProfile %></a> <a href="#" class="button button-small button-red broadcast_widget_undo"><i class="icon icon-rotate-left"></i> <%= templates.undo %></a></span>         <span class="broadcast_actions_unsharing"><button class="button button-small button-green" disabled="disabled"><i class="icon icon-spinner icon-spin"></i> <%= templates.unsharing %></button></span>         </span>         <a class="button button-small needs_delegated_tooltip" href="<%- settingsPrivacyUrl %>" title="<%= templates.sharingSettings %>"><i class="icon icon-wrench"></i></a>         </form>         </div>')(e)},p(function(){return g.init()}),e.exports=g},1042:function(e,t,n){var i,r,o,a,s,l,c,d,u,p,m,f,v,h,g,w;l=n(334),i=n(385),o=n(575),r=n(537),d=n(339),v=n(569),d=ds.require("dsdata"),p=ds.require("loadCSS"),s=o.Router,a=o.Route,c=o.browserHistory,w=void 0,g=void 0,f=!1,h={},u=function(){return w||(w=document.createElement("div"),document.getElementById("page").appendChild(w)),w},m=function(e,t){var i,r,o;return o=void 0,i=["components/react-modal.css","components/loading.css"],r=function(){return new Promise(function(e){return n.e(75,function(){return g=n(567),o=n(1043),e()})})},f=Promise.all([v.load("search"),i.map(p),r()]).then(function(){return t(null,o)})},h={init:function(){return l.isElement(w)?f.then(function(){return g.showSearch()}):function(){var e,t,n;return t=d.locale===d.defaultLocale?"/":"/:locale",e=u(),n=i.createElement(a,{path:t},i.createElement(a,{path:"(:text/)master/(view/):masterId",getComponents:m})),r.render(i.createElement(s,{routes:n,history:c}),e)}()}},e.exports=h}});
//# sourceMappingURL=release.js.map